#!/usr/bin/env ruby

require 'benchmark/ips'
require 'mini_mime'
require 'mime/types/columnar'
require 'checking-you-out'

::CHECKING::YOU::OUT::from_postfix('jpg')
sleep(0.2)

# Add our development CYO to LOAD_PATH so we can run it without Bundler.
$: << File.expand_path('../../lib', __FILE__)


Benchmark.ips do |bm|
  bm.report 'cached content_type lookup MiniMime' do
    MiniMime.lookup_by_filename("a.jpg").content_type
  end

  bm.report 'content_type lookup MIME::Types' do
    MIME::Types.type_for("a.jpg")[0].content_type
  end

  bm.report 'content_type lookup CHECKING::YOU::OUT' do
    CHECKING::YOU::OUT::from_postfix("jpg")
  end
end
