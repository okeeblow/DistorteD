#!/usr/bin/env ruby

require 'bundler/setup'
require 'globeglitter'
require 'securerandom'
require 'benchmark/ips'

Benchmark.ips do |bm|
  bm.report 'SecureRandom::uuid random String' do
    ::SecureRandom::uuid
  end
  bm.report 'SecureRandom::uuid random String to Integer' do
    ::SecureRandom::uuid.gsub(?-, '').to_i(16)
  end
  bm.report 'GlobeGlitter random from SecureRandom::uuid' do
    ::GlobeGlitter::new(::SecureRandom::uuid.gsub(?-, '').to_i(16))
  end
  bm.report 'GlobeGlitter random native' do
    ::GlobeGlitter::random
  end
  bm.report 'GlobeGlitter random native to String' do
    ::GlobeGlitter::random.to_s
  end
end

# TODO: Benchmark `::IO::Buffer` vs `::Integer` immediates https://docs.ruby-lang.org/en/master/IO/Buffer.html
